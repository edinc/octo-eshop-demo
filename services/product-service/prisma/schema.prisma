generator client {
  provider      = "prisma-client-js"
  output        = "../node_modules/.prisma/client-product"
  binaryTargets = ["native", "linux-musl-arm64-openssl-3.0.x", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Product {
  id          String   @id @default(uuid())
  name        String
  description String
  price       Decimal  @db.Decimal(10, 2)
  category    Category
  brand       String
  images      String[]
  stock       Int      @default(0)
  featured    Boolean  @default(false)
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  specifications ProductSpecification?

  @@index([category])
  @@index([brand])
  @@index([price])
  @@map("products")
}

model ProductSpecification {
  id        String  @id @default(uuid())
  productId String  @unique @map("product_id")
  frameSize String  @map("frame_size")
  wheelSize String  @map("wheel_size")
  weight    Decimal @db.Decimal(5, 2)
  material  String
  gears     Int
  color     String

  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@map("product_specifications")
}

enum Category {
  mountain
  road
  hybrid
  electric
  kids
}
